{{ define "canonical" }}
  {{ if .Params.canonical }}
    <link rel="canonical" href="{{ .Permalink }}">
  {{ end }}
{{ end }}

{{ define "title" }}{{ .Title }} | {{ .Site.Title }}{{ end }}
{{ define "description" }}{{ .Params.excerpt }}{{ end }}
{{ define "header" }}
<header></header>
{{ partial "site-navigation.html" . }}
{{ end }}

{{ define "main" }}
<div class="page">
  <article class="article">
    <time class="article__date" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
      {{ .Date.Format "January 2, 2006" }}
    </time>
    <h1 class="article__title">{{ .Title }}</h1>
    {{ if and .Params.toc .TableOfContents }}
    <div class="article__toc nested-links">
      {{ .TableOfContents }}
    </div>
    {{ end }}
    <section class="article__content nested-links">
      {{ .Content }}
    </section>
    {{ partial "article-footer.html" . }}
  </article>
  <div class="article-extra">
    {{ partial "extra-content.html" . }}
  </div>
</div>
{{ end }}

{{ define "scripts" }}
  {{ if .Params.premium }}
    {{ $priceId := .Params.priceId | default "price_1SEqfgAhWhMKvItA3GfwRisL" }}
    <link rel="stylesheet" href='{{ "css/paywall.css" | absURL }}'>
    <script>
      // Set premium article data
      document.body.dataset.premium = 'true';
      document.body.dataset.priceId = '{{ $priceId }}';
    </script>
    <script src='{{ "js/magic-link-paywall.js" | absURL }}'></script>
  {{ end }}
{{ end }}