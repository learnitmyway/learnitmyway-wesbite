# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

Project type: Hugo static site, built and deployed via Netlify. Asset pipeline uses PostCSS and imagemin orchestrated by Make.

Prerequisites
- Hugo (align with netlify.toml HUGO_VERSION: 0.147.9)
- Node (nvm) — see .nvmrc (22.19.0)

Setup
- nvm use && npm install
- If needed, brew install hugo

Common commands
- Start local dev (Hugo watch + PostCSS watch + BrowserSync live server)
  make start
- Full build (PostCSS, imagemin, Hugo)
  make build
- CSS only
  make postcss           # one-off build
  make postcss/watch     # watch mode
- Images
  make imagemin
- Serve built site (if you only want to preview ./public)
  make browser-sync/watch
- Create a new post
  hugo new post/<slug>.md
- Production build locally (minified CSS via cssnano)
  NODE_ENV=production make build

Notes on linting and tests
- No lint or test tooling is configured in this repo (no ESLint/Prettier/Jest/Vitest configs found).

CI/CD
- Netlify builds with: command = "make build"; publish = "public"
- Netlify env:
  - HUGO_VERSION = 0.147.9
  - HUGO_ENV = production
  - NODE_ENV = production
  - HUGO_BASEURL varies by context (preview vs production)

High-level architecture
- Hugo content and templates
  - content/: Markdown posts (organized by date and topic)
  - layouts/: Hugo templates
    - _default/baseof.html provides the base template; list.html and post-specific templates compose pages
    - layouts/partials/: shared sections (header, navigation, analytics link, social, privacy policy, etc.)
  - config.toml: site configuration (language, pagination, Goldmark settings, robots, etc.)
- Assets
  - src/css/: authoring sources (styles.css, syntax.css)
  - PostCSS pipeline (postcss.config.js):
    - postcss-import, postcss-preset-env (stage 0)
    - cssnano enabled when NODE_ENV=production
  - Output CSS written to static/dist/ via Makefile
  - static/: copied as-is to the build; contains favicons, images, JS (e.g., share-buttons.js), and Netlify files (_headers, _redirects)
- Build output
  - public/: generated by Hugo (git-ignored)
- Orchestration (Makefile)
  - Encapsulates commands for BrowserSync, PostCSS (with watch), imagemin, and the overall build/hugo steps
- Decisions and conventions
  - decision-records/2020-06-01_absURL.md:
    - Use absURL so assets work across environments; baseURL is "/" in config and overridden via Netlify contexts (HUGO_BASEURL)

Troubleshooting tips specific to this repo
- If CSS changes don’t appear, ensure make postcss/watch is running (make start runs it) and that output is landing in static/dist/
- If production CSS minification isn’t applied locally, set NODE_ENV=production when running make build
